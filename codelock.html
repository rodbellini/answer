<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Code Lock</title>
  <style>
    body {
      background-color: black;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    #wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      position: relative;
    }

    #case {
      position: absolute;
      width: 500px;
      height: auto;
      z-index: 0;
    }

    #lock {
      position: absolute;
      width: 220px;
      top: 180px;
      left: 140px;
      z-index: 1;
    }

    #display {
      position: absolute;
      top: 130px;
      left: 165px;
      font-family: monospace;
      font-size: 20px;
      color: #00ff00;
      background: rgba(0, 0, 0, 0.5);
      padding: 5px 10px;
      border-radius: 5px;
      z-index: 2;
    }

    .error {
      animation: blink 0.2s steps(2, start) 3;
    }

    @keyframes blink {
      0%, 100% { color: red; }
      50% { color: black; }
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <img src="codelock1.png" id="case" alt="lock case">
    <img src="codelock.png" id="lock" alt="code lock">
    <div id="display">____</div>
  </div>

  <script>
    let input = "";
    const display = document.getElementById("display");
    const validCodes = {
      "1717": "entrynum17.html"
    };

    function updateDisplay() {
      display.textContent = input.padEnd(4, "_");
    }

    function resetInput(error = false) {
      if (error) {
        display.classList.add("error");
        setTimeout(() => {
          display.classList.remove("error");
          input = "";
          updateDisplay();
        }, 600);
      } else {
        input = "";
        updateDisplay();
      }
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "Backspace") {
        input = input.slice(0, -1);
        updateDisplay();
        return;
      }

      if (!/^[0-9]$/.test(e.key)) return;
      if (input.length >= 4) return;

      input += e.key;
      updateDisplay();

      if (input.length === 4) {
        if (validCodes[input]) {
          window.location.href = validCodes[input];
        } else {
          resetInput(true);
        }
      }
    });

    updateDisplay();
  </script>
</body>
</html>
